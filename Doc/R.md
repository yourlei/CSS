--------------
	2015-10-20
--------------
--------------
R笔记（一）－Ｒ语言基础
####　基本数学运算
R中基本的运算有加，减，乘，除和幂，括号运算．其优先级为括号运算－＞幂运算－＞乘除运算－＞加减法

``` R
> 1+1 # [1] 2

> 1 / 2 # [1] 0.5

> 4 * (4 + 5) # [1] 36
```

#### 变量
Ｒ中的变量比较灵活，类似于动态语言存储的数据类型可以不受限制；变量不用预先声明，直接赋值给变量即可，同时可以在程序中为变量赋不同类型的值，如变量的初始值是数字，而后可以赋值为字符，逻辑值值．
赋值操作符是 <code>-></code>　和 <code>=</code>,具体使用哪种方式可根据个人的喜欢

``` R
> x <- 5
> y = 10
```

R中允许连续的同时将一个值赋给多个变量，如
``` R
> x <- y <- 10
> x
[1] 10
> y
[1] 10
```
变量名称可以是数字，字符，句号（.），和下划线的任何组合；但是变量名不能以数字或是下划线开头，如：
``` R
> 3d <-  9
错误: unexpected symbol in "3d"
> _d <-  9
错误: unexpected input in "_"
```
在Ｒ中删除一个变量可以使用函数remove或其缩写rm来实现, 如：
``` R
> x <- 5
> x
[1] 5
> rm(x)
> x
错误: 找不到对象'x'
```
注意Ｒ中变量名称同样是区分大小写的，变量 <code>a</code> 和　<code>A</code>是两个不同的变量．

####　数据类型

四种主要数据类型：数值型(numeric), 字符型(character)(字符串), 日期型(Date)或POSIXct(基于日期)，逻辑型(logical)(TRUE,FALSE).
查看变量中存储的数据类型可以用class函数．

``` R
> x <- 5
> class(x)
[1] "numeric"
```
##### numeric
Ｒ中的数值型类似于Ｃ中的浮点(float)和双精度(double)类型，它可以用来表示正，负整数及小数，包括零．一个
数值存储在变量中会自动被假定为数值型，判断一个变量是否为数值型，可用is.numeric函数

``` R
> x <- 5
> is.numeric(x)
[1] TRUE
```
R中还有一个不常用的类型整数形(integer),它只能用于表示整数，同时若要将一个整型值赋给一个变量，须在该整数
后加一个Ｌ，同样可以使用is.integer函数检查变量是否为整型．

``` R
> x <- 5L
> is.integer(x)
[1] TRUE
```
整型变量可以转换为数值型，如：
``` R
> class(5L / 4L)
[1] "numeric"
```
##### character
``` R
> char <- 'data'
> char
[1] "data"
```
查看字符或数值的长度，可用nchar函数．
``` R
# 字符的长度
> char <- 'data'
> nchar(char)
[1] 4
# 数值的长度
> num <- 1234
> nchar(num)
[1] 4
```
##### Date
``` R
> date1 <-  as.Date('2015-10-20')
> date1
[1] "2015-10-20"
```

``` R
> time2 <-  as.POSIXct('2015-10-20 23:20')
> time2
[1] "2015-10-20 23:20:00 CST"
```

Date仅表示日期，而ＰＯＳＩＸｃｘ存储日期和时间，它们实际上分别代表从１９７０年１月１日以来的天数(Date)和秒数(POSIXct).

``` R
> as.numeric(date1)
[1] 16728 # 自１９７０年１月１日到２０１５年１０月２０日的总天数
> as.numeric(time2)
[1] 1445354400　# 自１９７０年１月１日到２０１５年１０月２０日的总秒数
```
##### logical
逻辑值相当于其他语言中的布尔类型，其值可为真（ＴＲＵＥ）和假（ＦＡＬＳＥ），数值上来讲真等同于１，假则等于０

``` R
> TRUE * 5
[1] 5
> FALSE * 5
[1] 0

> is.logical(TRUE)
[1] TRUE
```

####　向量
一个向量是一些元素的集合，　且所有元素须是同一类型．创建一个向量，如：
``` R
> vector1 <- c(1, 2, 3, 4, 5)
> vector2 <- c(1:5)
> vector3 <- 1:5
> vector1
[1] 1 2 3 4 5
> vector2
[1] 1 2 3 4 5
> vector3
[1] 1 2 3 4 5
```
以上三种方式都可以创建一个向量，常用的方式是用c，c表示合并（combine）,向量没有维数，相当于一个容器，对向量的操作会自动应用到向量的每一个分量中．如：

``` R
> vector1 * 2
[1]  2  4  6  8 10

> sqrt(vector1)
[1] 1.000000 1.414214 1.732051 2.000000 2.236068
```
向量间的操作，应当要考虑它们之间的长度是否相等或者一个向量的长度是另一向量的整数倍，看个例子：
``` R
# 长度相等的情况
> x <- c(1:10)
> y <- c(11:20)
> x + y
 [1] 12 14 16 18 20 22 24 26 28 30

＃　长度不等的情况
> x <- c(1:10)
> z <- c(1:5)
> x + z
 [1]  2  4  6  8 10  7  9 11 13 15

```
不难看出，当长度不等时，长度较小的向量会按顺序去匹配较长的那个向量的每个元素．如皋长向量的长度不是短向量长度的整数倍时，编译会发出警告．
``` R
> z <- c(1:3)
> x + z
 [1]  2  4  6  5  7  9  8 10 12 11
Warning message:
In x + z : 长的对象长度不是短的对象长度的整倍数
```
向量的比较：
``` R
> x <- c(1:10)
> y <- c(11:20)
> x < y
 [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
```
向量中每个元素的长度：
``` R
> name <-  c('dog', 'cat', 'duck', 'fish', 'monkey', 'pig')
> nchar(name)
[1] 3 3 4 4 6 3
```
给向量命名：
``` R
> nums <- c(one = 'a', two = 'b', last = 'c')
> nums
 one  two last 
 "a"  "b"  "c" 
 ```
 先创建一个向量，然后使用names函数给向量命名：
 ``` R
 > c <-  1:3
 > names(c) <- c('a', 'b', 'c')
 > c
 a b c 
 1 2 3 
 ```
#### 函数文件
Ｒ中所提供的函数都含有相应的说明文档，当要查看函数的使用方法时，可用 <code>? names</code>,即在函数
名前加个问号查看说明文档．　
``` R
? names #　查看关于ｎａｍｅｓ函数的详细说明
```
#### 缺失数据
Ｒ中表示缺失数据可用ＮＡ和ＮＵＬＬ，两者类似，但其表现不同．在某些情况下，我们获取的数据不完整，有缺失时
可用NA来表示，如
``` R
> data <- c(1, 2, NA, 8, NA)
> data
[1]  1  2 NA  8 NA
```
is.na用来检查向量中每个元素是否有缺失．
``` R
> data <- c(1, 2, NA, 8, NA)
> is.na(data)
[1] FALSE FALSE  TRUE FALSE  TRUE
```
##### NULL
NULL表示没有任何东西，空白．它与ＮＡ的区别是ＮＵＬＬ是最小的原子，其不能存在于向量中．如果向量中使用ＮＵＬＬ，其自然就消失．

``` R
> data2 <- c(1, NULL, 2)
> data2
[1] 1 2
```
检查ＮＵＬＬ的函数是is.null,如：
``` R
> is.null(NULL)
[1] TRUE
```
